<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../bower_components/iron-flex-layout/classes/iron-flex-layout.html">

<dom-module id="resume-jobs">
<link rel="import" href="../polymer/polymer.html">

<dom-module id="resume-exp-element">
  <style>
    :host {
      display: block;
      box-sizing: border-box;
    }
    h4{
      margin-top: 0;
      margin-bottom: 0;
      margin-right: 10px;
    }
    .title{
      width: 100%;
      text-align: left;
      margin: 0;
      @apply(--layout-horizontal);
      @apply(--layout-wrap);
    }
    time.start {
      margin-bottom: 5px;
      padding-top: 9px;
      padding-left: 4px;
      border-top: 1px dotted $shadow;
      border-left: 4px solid $purple;
    }*/

.transition, .element i:before, .element i:after {
  transition: all 0.25s ease-in-out;
}
.flipIn, .element {
  animation: flipdown 0.5s ease both;
}
.no-select {
  -webkit-ap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.element {
  position: relative;
  padding: 0;
  margin: 0;
  margin-bottom: 5px;
  padding-top: 9px;
  padding-left: 4px;
  border-top: 1px dotted rgba(51, 51, 51, 0.54);
  border-left: 4px solid #8e24aa;
}
.element:last-of-type {
  padding-bottom: 0;
}
.element i {
  position: absolute;
  transform: translate(-6px, 0);
  margin-top: 16px;
  right: 0;
}
.element i:before, .element i:after {
  content: "";
  position: absolute;
  background-color: #e7356e;
  width: 3px;
  height: 9px;
}
.element i:before {
  transform: translate(-2px, 0) rotate(45deg);
}
.element i:after {
  transform: translate(2px, 0) rotate(-45deg);
}
.element input[type=checkbox] {
  position: absolute;
  cursor: pointer;
  width: 100%;
  height: 100%;
  z-index: 1;
  opacity: 0;
}
.element input[type=checkbox]:checked ~ div.collapsible-content {
  margin-top: 0;
  max-height: 0;
  opacity: 0;
  transform: translate(0, 50%);
}
.element input[type=checkbox]:checked ~ i:before {
  transform: translate(2px, 0) rotate(45deg);
}
.element input[type=checkbox]:checked ~ i:after {
  transform: translate(-2px, 0) rotate(-45deg);
}

@keyframes flipdown {
  0% {
    opacity: 0;
    transform-origin: top center;
    transform: rotateX(-90deg);
  }
  5% {
    opacity: 1;
  }
  80% {
    transform: rotateX(8deg);
  }
  83% {
    transform: rotateX(6deg);
  }
  92% {
    transform: rotateX(-3deg);
  }
  100% {
    transform-origin: top center;
    transform: rotateX(0deg);
  }
}



    .title > time.start {
      font-weight: 700;
      font-size: 12px;
      color: rgba(0, 0, 0, 0.54);
    }
    time.start:before {
      content: "from ";
    }
    time.end {
    .title > time.start:before {
      content: "from ";
    }
    .title > time.end {

      font-weight: 700;
      font-size: 12px;
      color: rgba(0, 0, 0, 0.54);
    }
    time.end:before {
    /* line 15, ../module/_section.scss */
    .title > time.end:before {
      content: "to ";
    }
  </style>

  <template>
      <div class="element">
        <div on-click="toggle">
          <div class="title">
            <h4>{{job.role}} - {{job.company}}</h4>
            <div>
              <time class="start" datetime="{{startdate}}">{{job.startdate}}</time>
              <time class="end" datetime="{{enddate}}">{{job.enddate}}</time>
            </div>
          <iron-icon icon="icons:expand-more"></iron-icon>
          </div>
        </div>
        <iron-collapse tabindex="0">
          <div class="collapsible-content">
            <p>{{job.description}}</p>
            <ul>
              <template is="dom-repeat" items="{{job.tasks}}">
                <li>{{item.task}}</li>
              </template>
            </ul>
          </div>
        </iron-collapse>
    <div class="element">
      <input type="checkbox" checked>
      <i></i>
      <div class="title">
        <h4>{{job.role}} - {{job.company}}</h4>
        <time class="start" datetime="{{startdate}}">{{job.startdate}}</time>
        <time class="end" datetime="{{enddate}}">{{job.enddate}}</time>
      </div>
      <div class="collapsible-content">
        <p>{{job.description}}</p>
        <ul>
          <template is="dom-repeat" items="{{job.tasks}}">
            <li>{{item}}</li>
          </template>
        </ul>
      </div>
  </template>

</dom-module>

<script>

  Polymer({
    is: 'resume-jobs',
    properties: {
      id: {
        type: Number,
        value: 0
      },
      job: {
        type: Object,
        value: function() {
          return {
            role: 'Developer',
            company: 'CompanyName',
            startdate: '2014-01-02',
            enddate: '2015-12-31',
            description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
            tasks: {
              type: Object,
              value: function() {
                task: 'one task'
              }
            },
          };
        }
      }
    },
    toggle: function(e) {
      this.$$('iron-icon').icon = (this.$$('iron-icon').icon == 'icons:expand-more' ? 'icons:expand-less' : 'icons:expand-more');
      console.log(this.$$('iron-icon').icon);
      this.$$('iron-collapse').toggle();
    },

    // Element Lifecycle

    ready: function() {
      // `ready` is called after all elements have been configured, but
      // propagates bottom-up. This element's children are ready, but parents
      // are not.
      //
      // This is the point where you should make modifications to the DOM (when
      // necessary), or kick off any processes the element wants to perform.
    },

    attached: function() {
      // `attached` fires once the element and its parents have been inserted
      // into a document.
      //
      // This is a good place to perform any work related to your element's
      // visual state or active behavior (measuring sizes, beginning animations,
      // loading resources, etc).
      // alert('attached');
    },

    detached: function() {
      // The analog to `attached`, `detached` fires when the element has been
      // removed from a document.
      //
      // Use this to clean up anything you did in `attached`.
    }
  });
</script>
